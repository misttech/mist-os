# Copyright 2025 Mist Tecnologia Ltda. All rights reserved.
# Copyright 2019 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/bind/bind.gni")
import("//build/zircon/zx_library.gni")

group("platform") {
  deps = [ ":platform-bus-driver" ]
}

driver_bind_rules("platform-bus-bind") {
  bind_output = "platform-bus.bindbc"
  disable_autobind = true
}

source_set("common") {
  sources = [ "platform-bus.cc" ]
  public_deps = [
    ":platform-bus-bind",
    "//src/devices/bind/fuchsia:fuchsia_cpp",
    "//src/devices/bind/fuchsia.platform:fuchsia.platform_cpp",
    "//zircon/kernel/object:headers",
    "//zircon/system/ulib/ddk-platform-defs",
    "//zircon/system/ulib/fbl",

    # Vendor
    "//vendor/misttech/src/lib/ddk",
    "//vendor/misttech/src/lib/ddktl",
    "//vendor/misttech/zircon/kernel/lib/mistos/util:headers",
  ]

  configs += [ "//build/config:default_include_dirs" ]
}

zx_library("platform-bus-driver") {
  deps = [
    ":common",
    "//vendor/misttech/src/devices/misc/drivers/mistos:driver",
  ]
}
